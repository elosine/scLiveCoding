<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Pbinds and Patterns: The Basics - Howto_co34pt_LiveCode</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Howto_co34pt_LiveCode</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="..">Contents</a>
</li>

                        
                            
<li >
    <a href="../todo/">To-Do list</a>
</li>

                        
                            
<li >
    <a href="../legalcode/">License</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../1-1-What-This-Repo-Is/">What this Repo Is</a>
</li>

                        
                            
<li >
    <a href="../1-2-Why-I-Live-Code/">Why I live Code</a>
</li>

                        
                            
<li >
    <a href="../1-3-Why-SuperCollider/">Why SuperCollider?</a>
</li>

                        
                            
<li >
    <a href="../1-4-How-To-Use-This-Repo/">How To Use This Repo</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Basics <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../2-1-Recommended-Addons/">Recommended Addons</a>
</li>

                        
                            
<li >
    <a href="../2-2-Why-ProxySpace/">ProxySpace - Live Coding in SuperCollider</a>
</li>

                        
                            
<li >
    <a href="../2-3-Setup-Code---Making-Performance-Easier/">Setup Code: Making Performance Easier</a>
</li>

                        
                            
<li class="active">
    <a href="./">Pbinds and Patterns: The Basics</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rhythm <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../3-1-Rhythmic-Construction-For-Algorave-Sets/">Rhythmic Construction for Algorave Sets</a>
</li>

                        
                            
<li >
    <a href="../3-2-Basic-Rhythms/">Basic Rhythms</a>
</li>

                        
                            
<li >
    <a href="../3-3-Techniques-For-Modifying-Rhythm/">Techniques for Modifying Rhythm</a>
</li>

                        
                            
<li >
    <a href="../3-4-Euclidean-Rhythms/">Euclidean Rhythms</a>
</li>

                        
                            
<li >
    <a href="../3-5-StageLimiter-Abuse/">StageLimiter Abuse</a>
</li>

                        
                            
<li >
    <a href="../3-6-L-Systems-For-Rhythm/">L-Systems for Rhythm</a>
</li>

                        
                            
<li >
    <a href="../3-7-Looping/">Looping and using Looped Samples</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Melody and Pitch <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../4-1-Pitch-And-Patterns/">Pitch and Patterns</a>
</li>

                        
                            
<li >
    <a href="../4-2-Types-of-Pitch-Arrangement/">Types of Pitch Arrangement</a>
</li>

                        
                            
<li >
    <a href="../4-3-Riffs/">Riffs</a>
</li>

                        
                            
<li >
    <a href="../4-4-Pitch-and-Static-Synths/">Pitch and Static Synths</a>
</li>

                        
                            
<li >
    <a href="../4-5-Between-Pitch-And-Noise/">Between Pitch and Noise</a>
</li>

                        
                            
<li >
    <a href="../4-6-Good-SynthDef-Writing-for-co34pt_LiveCode/">Good SynthDef Writing for co34pt_LiveCode</a>
</li>

                        
                            
<li >
    <a href="../4-7-MIDI/">Using MIDI</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Non-Pattern Techniques <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../5-1-Drones/">Drones</a>
</li>

                        
                            
<li >
    <a href="../5-2-SuperCollider-as-a-Modular-Synth/">SuperCollider as a Modular Synth</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Visuals and Data <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../6-1-FreqScope-and-Visuals/">FreqScope and Visuals</a>
</li>

                        
                            
<li >
    <a href="../6-2-OSC-and-Data-Streams/">OSC and Data Streams</a>
</li>

                        
                            
<li >
    <a href="../6-3-Using-Datasets/">Using Datasets</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../2-3-Setup-Code---Making-Performance-Easier/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../3-1-Rhythmic-Construction-For-Algorave-Sets/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#pbinds-and-patterns">Pbinds and Patterns</a></li>
        
            <li class="second-level"><a href="#introduction">Introduction</a></li>
            
        
            <li class="second-level"><a href="#synthdefs-arguments-and-pbinds">SynthDefs, Arguments and Pbinds</a></li>
            
        
            <li class="second-level"><a href="#nesting-pattern-classes">Nesting pattern classes</a></li>
            
        
            <li class="second-level"><a href="#extra-arguments-for-melodypitch">Extra arguments for melody/pitch</a></li>
            
        
            <li class="second-level"><a href="#why-i-dont-use-pdefs">Why I don't use Pdefs</a></li>
            
        
            <li class="second-level"><a href="#more-on-patterns">More on Patterns</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="pbinds-and-patterns">Pbinds and Patterns</h1>
<hr />
<h3 id="introduction">Introduction</h3>
<p>According to SuperCollider's <a href="http://doc.sccode.org/Tutorials/A-Practical-Guide/PG_01_Introduction.html">Practical Guide to Patterns</a></p>
<blockquote>
<p>Patterns describe calculations without explicitly stating every step. They are a higher-level representation of a computational task. While patterns are not ideally suited for every type of calculation, when they are appropriate they free the user from worrying about every detail of the process. Using patterns, one writes what is supposed to happen, rather than how to accomplish it.</p>
</blockquote>
<p>A large part of my live coding performances involve using patterns, specifically <a href="http://doc.sccode.org/Classes/Pbind.html">Pbinds</a> as Proxies inside of ProxySpace (see section 2.2.1) to create rhythmic elements that are synchronised to ProxySpace's <a href="http://doc.sccode.org/Classes/TempoClock.html">TempoClock</a>. In this case, 'rhythmic elements' can mean percussion, melody, bass, pads, or generally anything that is played 'in tempo'.</p>
<h3 id="synthdefs-arguments-and-pbinds">SynthDefs, Arguments and Pbinds</h3>
<p>The Pbinds I perform with work in conjunction with a set of <a href="http://doc.sccode.org/Classes/SynthDef.html">SynthDefs</a> (these can be found in the SynthDefs.scd file of the Setup folder) which serve various musical purposes, and plays them with specifies arguments at a given duration. This isn't a particularly intuitive concept to explain, but an example can help illustrate how this works. Take the SynthDef I use the most, <code>bplay</code>:</p>
<pre><code class="supercollider">SynthDef(\bplay,
    {arg out = 0, buf = 0, rate = 1, amp = 0.5, pan = 0, pos = 0, rel=15;
        var sig,env ;
        sig = Pan2.ar(PlayBuf.ar(2,buf,BufRateScale.ir(buf) * rate,1,BufDur.kr(buf)*pos*44100,doneAction:2),pan);
        env = EnvGen.ar(Env.linen(0.0,rel,0),doneAction:2);
        sig = sig * env;
        sig = sig * amp;
        Out.ar(out,sig);
}).add;
</code></pre>

<p><code>bplay</code> is a simple stereo-panned sample player driven by the <a href="http://doc.sccode.org/Classes/PlayBuf.html">PlayBuf</a> class, which takes the following arguments:</p>
<ul>
<li><code>out</code>: the bus to be played to (this is needed as an argument for the SynthDef to work correctly inside ProxySpace, and I don't usually touch it</li>
<li><code>buf</code>: the buffer to be read by the synth (all of which are loaded into dictionary <code>d</code> by default</li>
<li><code>rate</code>: the speed the sample will be played at (with no compensation for pitch)</li>
<li><code>amp</code>: how loud the sample is, with 1 being the original volume of the sample</li>
<li><code>pan</code>: where the sound is placed in the stereo field, with <code>0</code> being centre</li>
<li><code>pos</code>: the position from which the sample starts playing, normalised from <code>0</code> to <code>1</code>, e.g. a value of <code>0.5</code> will play the sample from the middle </li>
<li><code>rel</code>: in this case specifies how long the server is allowed to keep the instance open before freeing it. Normally the instance will be freed when the sample is finished playing, but in the case of very long samples or samples played backwards this freeing may not occur, leading to server load building in the background due to dead running processes. This default value of 15 </li>
</ul>
<p>Pbinds also have some arguments that need satisfying:</p>
<ul>
<li><code>instrument</code>: the SynthDef that will be used to deliver this 'instance' in the pattern</li>
<li><code>dur</code>: The duration of each 'instance', if used directly in ProxySpace, a <code>dur</code> value of 1 results in an 'instance' once every clock cycle. 
Note: the default <code>dur</code> value of a Pbind is 1, and the default <code>instrument</code> value is SuperCollider's built in Piano synth, but specifying both anyway (especially <code>instrument</code>) is good practice.</li>
</ul>
<p>So, if I wanted to have a kick drum playing once each beat in time with the ProxySpace timer, after I had run my setup file I would do the following:</p>
<pre><code class="supercollider">(
~k = Pbind(\instrument,\bplay,\buf,d[&quot;k&quot;][0],\dur,1);
~k.play;
)
</code></pre>

<p>This Pbind <code>~k</code>, spefifies that the instrument it will be using is <code>bplay</code>, the buffer <code>bplay</code> reads from will be the first index of the <code>k</code> entry in the dictionary (which contains kick drums), and that the <code>dur</code>/duration is <code>1</code>, once per cycle. If any arguments that the SynthDef takes are not specified as part of the Pbind, the SynthDef's default values will be used. Pbind arguments have to be given as key-value pairs, anything else will result in a syntax error, eg:</p>
<pre><code class="supercollider">~k = Pbind(\instrument,\bplay,\buf,d[&quot;k&quot;][0],\dur,1,\rate);
</code></pre>

<p>As part of these key-value pairs, Pbinds can take Pattern classes as inputs. <a href="http://doc.sccode.org/Classes/Pwhite.html"><code>Pwhite</code></a> gives random values between a minimum and maximum. If I wanted to specify a random pitch of the kick drum, I could add this to the pattern:</p>
<pre><code class="supercollider">~k = Pbind(\instrument,\bplay,\buf,d[&quot;k&quot;][0],\dur,1,\rate,Pwhite(1,1.2));
</code></pre>

<h3 id="nesting-pattern-classes">Nesting pattern classes</h3>
<p>Pattern classes can also be <a href="https://en.wikipedia.org/wiki/Nesting_(computing)">nested</a>. Here are a few examples of some more complex percussive patterns. Once you start nesting pattern classes, things can get complicated quite quickly.</p>
<pre><code class="supercollider">//to play with these examples, make sure the Setup File has been run

//footwork kickdrums
(
p.clock.tempo = 2.4;
~k = Pbind(\instrument,\bplay,\buf,d[&quot;k&quot;][0],\dur,Pbjorklund2(Pseq([3,3,3,5],inf),8)/4,\amp,1,\rate,Pseq([1,1.2],inf));
~k.play;
)

//skittery hi-hats
(
p.clock.tempo = 1.5;
~h = Pbind(\instrument,\bplay,\buf,d[&quot;ch&quot;][0],\dur,Pwrand([0.25,Pseq([0.125],2),0.5,Pseq([0.125/2],4)],[4,1,1,0.5].normalizeSum,inf),\amp,Pwhite(0.2,1));
~h.play;
)

//offset percussion patterns for techno feel behind a basic kick
(
p.clock.tempo = 135/60;
~c = Pbind(\instrument,\bplay,\buf,d[&quot;sfx&quot;][6],\dur,Pbjorklund2(Pexprand(2,15).round(1),16,inf,Pwhite(1,5).asStream)/4,\amp,1,\rate,2.2);
~c2 = Pbind(\instrument,\bplay,\buf,d[&quot;sfx&quot;][6],\dur,Pbjorklund2(Pexprand(2,15).round(1),16,inf,Pwhite(1,5).asStream)/4,\amp,1,\rate,1.9);
~k = Pbind(\instrument,\bplay,\buf,d[&quot;sk&quot;][0],\dur,1,\amp,5);
~c.play;
~c2.play;
~k.play;
)

//snare running forwards and back
(
p.clock.tempo = 150/60;
~sn = Pbind(\instrument,\bplay,\buf,d[&quot;s&quot;][4],\dur,Pwhite(1,4)/2,\amp,1,\rate,Prand([1,-1],inf),\pos,Pkey(\rate).linlin(-2,2,0.9,0));
~sn.play;
)
</code></pre>

<h3 id="extra-arguments-for-melodypitch">Extra arguments for melody/pitch</h3>
<p>Pbinds also have some additional trickery for anything involving pitch.</p>
<p>Let's look at the <code>sinfb</code> SynthDef (the arguments are listed in the code block for simplicity)</p>
<pre><code class="supercollider">//SinFB Bass
(
SynthDef(\sinfb, {
    arg freq = 440, atk = 0.01, sus = 0, rel = 1, fb = 0, amp = 0.3, out = 0, pan=0;
    var sig, env;
    env = EnvGen.ar(Env.linen(atk,sus,rel),1,1,0,1,2);
    sig = SinOscFB.ar(freq,fb,1);
    sig = sig*env;
    Out.ar(out,Pan2.ar(sig,pan,amp));
}).add;
);
/*
freq: frequency
atk: attack
sus: sustain
rel: release
fb: phase feedback
amp: amplitude
out: output bus
pan: stereo panning
*/
</code></pre>

<p>Here, the <code>freq</code> argument is the pitch of the oscillator. Pitch can be specified manually, like so:</p>
<pre><code class="supercollider">~sinfb = Pbind(\instrument,\sinfb,\dur,0.25,\freq,Pwhite(100,900));
</code></pre>

<p>However, if a variable in a SynthDef is given the name <code>freq</code>, Pbind allows the specification of the following in place of <code>freq</code> to activate a 'scale mode':</p>
<ul>
<li><code>scale</code>: the scale and tuning used - scales can be listed with <code>Scale.directory</code> and tunings with <code>Tuning.directory</code> (default <code>Scale.major(\et12)</code>)</li>
<li><code>degree</code>: the degree of the scale to be played (default <code>0</code>)</li>
<li><code>octave</code>: the octave of the scale to be played (default <code>5</code>)</li>
</ul>
<p>Only one of these arguments needs to be specified to be in 'scale mode', for example:</p>
<pre><code class="supercollider">//run up the major scale
~sinfb = Pbind(\instrument,\sinfb,\dur,0.25,\degree,Pseq((0..7),inf));
</code></pre>

<p>But using all three gives full control over the parameters of the pitch used inside of a musical scale</p>
<pre><code class="supercollider">//run up and down chromatic scale one degree at a time
~sinfb = Pbind(\instrument,\sinfb,\scale,Scale.chromatic(\et12),\degree,Pseq((0..12).pyramid.mirror,inf),\octave,6,\dur,0.125/2,\amp,0.3,\fb,0.8,\rel,0.1)
</code></pre>

<p>By using the 'scale mode' of Pbinds you can easily adopt pitch structures that are organised around any scale and tuning you wish - SuperCollider has a bunch bundled in, but way more can be added with the Scala Scale library through quarks such as <a href="https://github.com/supercollider-quarks/TuningLib">TuningLib</a> and <a href="https://github.com/thormagnusson/TuningTheory">TuningTheory</a>, and arbitrary scales can be specified.</p>
<h3 id="why-i-dont-use-pdefs">Why I don't use Pdefs</h3>
<p>Another approach to using patterns is to make metapatterns by placing Pbinds (and Pmonos) inside of a <code>Pdef</code>, but i've found this to be too verbose to use while performing, and i've personally had some problems getting them to sync for performances that reply on strict metric patterns.</p>
<h3 id="more-on-patterns">More on Patterns</h3>
<p>Patterns form a huge part of my live sets, so I will be referencing them frequently throughout this repo, talking about their use in both rhythmic and melodic arrangement.</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
